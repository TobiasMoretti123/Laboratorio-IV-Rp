import{a as V}from"./chunk-6KNQYTPJ.js";import"./chunk-OTAXIUU4.js";import{o as H,p as L,r as J}from"./chunk-UTMHNS76.js";import"./chunk-WXI33M2S.js";import{C as N}from"./chunk-QAB7D26V.js";import{a as T,b as D,g as A,h as z,i as P}from"./chunk-JZGRMYVI.js";import{Ac as F,Gb as a,Gc as R,Hb as _,Ib as C,La as I,Oa as c,Pa as u,ba as S,ca as g,cb as f,ga as M,gb as l,la as k,lb as n,ma as v,mb as r,nb as B,rb as E,ta as y,ua as O,ub as m,wb as p,zc as j}from"./chunk-YTVPJGYC.js";var d=class o{constructor(t){this.http=t}apiUrl="https://restcountries.com/v3.1/all";ObtenerPaises(){return this.http.get(this.apiUrl)}ObtenerPaisesPorNombre(t){let e=`https://restcountries.com/v3.1/name/${t}`;return this.http.get(e)}static \u0275fac=function(e){return new(e||o)(M(T))};static \u0275prov=S({token:o,factory:o.\u0275fac,providedIn:"root"})};function q(o,t){if(o&1&&(n(0,"div",16),a(1),r()),o&2){let e=p();c(),_(e.usuarioLogeado)}}function Q(o,t){if(o&1&&(n(0,"div"),B(1,"img",20),r()),o&2){let e=p(2);c(),l("src",e.paisCorrecto.flags.png,I)}}function G(o,t){if(o&1&&(n(0,"div",17)(1,"h2",18),a(2,"\xBFDe qu\xE9 pa\xEDs es esta bandera?"),r(),f(3,Q,2,1,"div",19),r()),o&2){let e=p();c(3),l("ngIf",e.mostrarBandera)}}function K(o,t){if(o&1){let e=E();n(0,"button",21),m("click",function(){let s=y(e).$implicit,x=p();return O(x.verificarRespuesta(s))}),n(1,"p"),a(2),r()()}if(o&2){let e=t.$implicit,i=p();l("disabled",i.desabilitarBotones),c(2),_(e.translations.spa.common)}}var b=class o{constructor(t,e,i,s,x){this.paisesService=t;this.fireAuthService=e;this.snackBar=i;this.router=s;this.fireDatabase=x}paisCorrecto;opciones=[];mensajeResultado="";usuarioLogeado="";mostrarTooltip=!1;intentos=10;puntos=0;blockearRejugar=!0;desabilitarBotones=!1;mostrarBandera=!0;ngOnInit(){this.obtenerPaises(),this.fireAuthService.getUserEmail().subscribe(t=>{this.usuarioLogeado=t})}obtenerPaises(){this.paisesService.ObtenerPaises().subscribe(t=>{this.generarPregunta(t),this.EstadoDelJuego()})}generarPregunta(t){let e=Math.floor(Math.random()*t.length);this.paisCorrecto=t[e];let i=this.obtenerPaisesFalsos(t,e);this.opciones=this.mezclarOpciones([this.paisCorrecto,...i])}obtenerPaisesFalsos(t,e){let i=[];for(;i.length<3;){let s=Math.floor(Math.random()*t.length);s!==e&&!i.includes(t[s])&&i.push(t[s])}return i}mezclarOpciones(t){return t.sort(()=>Math.random()-.5)}verificarRespuesta(t){t.translations.spa.common===this.paisCorrecto.translations.spa.common?(this.puntos++,this.intentos--,this.AbrirSnackBar("\xA1Correcto!"),this.obtenerPaises()):(this.intentos--,this.AbrirSnackBar("Incorrecto, la Bandera Seleccionada era de: "+this.paisCorrecto.translations.spa.common),this.obtenerPaises())}Volver(){this.RuteoHome()}RuteoHome(){this.router.navigate(["/Home"])}AbrirSnackBar(t){this.snackBar.open(t,"Cerrar",{duration:4e3})}mostrarTexto(){this.mostrarTooltip=!0}ocultarTexto(){this.mostrarTooltip=!1}CerrarSession(){this.fireAuthService.logout(),this.RuteoHome(),this.AbrirSnackBar("Se ha cerrado la sesi\xF3n")}EstadoDelJuego(){this.intentos===0&&(this.mostrarBandera=!1,this.blockearRejugar=!1,this.desabilitarBotones=!0,this.AbrirSnackBar(`Obtuviste ${this.puntos} puntos`),this.fireDatabase.CargarPosicion(this.usuarioLogeado,"preguntados",this.puntos))}JugarDeNuevo(){this.intentos=10,this.puntos=0,this.desabilitarBotones=!1,this.blockearRejugar=!0,this.mostrarBandera=!0,this.obtenerPaises()}static \u0275fac=function(e){return new(e||o)(u(d),u(N),u(J),u(A),u(V))};static \u0275cmp=k({type:o,selectors:[["app-preguntados"]],decls:25,vars:6,consts:[[1,"button-grid"],["mat-raised-button","",3,"click"],["mat-raised-button","","routerLink","/Resultados/preguntados"],["mat-raised-button","","routerLink","/Chat"],["mat-raised-button","","routerLink","/QuienSoy"],["mat-raised-button","","color","warn",3,"click"],[1,"material-icons",3,"mouseover","mouseleave"],["class","tooltip",4,"ngIf"],[1,"container"],["class","pregunta",4,"ngIf"],[1,"opciones"],["mat-raised-button","",3,"disabled","click",4,"ngFor","ngForOf"],[1,"estadoDeJuego"],[1,"texto","puntos"],[1,"texto","vidas"],["mat-raised-button","","color","primary",1,"rejugar",3,"click","disabled"],[1,"tooltip"],[1,"pregunta"],[1,"titulo"],[4,"ngIf"],["alt","Bandera correcta",1,"bandera",3,"src"],["mat-raised-button","",3,"click","disabled"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"button",1),m("click",function(){return i.Volver()}),a(2,"Volver"),r(),n(3,"button",2),a(4,"Posiciones"),r(),n(5,"button",3),a(6,"Chat"),r(),n(7,"button",4),a(8,"Sobre M\xED"),r(),n(9,"button",5),m("click",function(){return i.CerrarSession()}),a(10,"Cerrar Sesi\xF3n"),r(),n(11,"i",6),m("mouseover",function(){return i.mostrarTexto()})("mouseleave",function(){return i.ocultarTexto()}),a(12,"account_circle"),r(),f(13,q,2,1,"div",7),r(),n(14,"div",8),f(15,G,4,1,"div",9),n(16,"div",10),f(17,K,3,2,"button",11),r(),n(18,"div",12)(19,"p",13),a(20),r(),n(21,"p",14),a(22),r()(),n(23,"button",15),m("click",function(){return i.JugarDeNuevo()}),a(24," Volver a Jugar "),r()()),e&2&&(c(13),l("ngIf",i.mostrarTooltip),c(2),l("ngIf",i.paisCorrecto),c(2),l("ngForOf",i.opciones),c(3),C("Puntos: ",i.puntos,""),c(2),C("Intentos: ",i.intentos,""),c(),l("disabled",i.blockearRejugar))},dependencies:[j,F,z,H],styles:[".button-grid[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;background-color:#ffffff80;padding:.1vw;display:flex;justify-content:flex-end}.button-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.5vw;padding:1vw 2vw;font-size:1vw;margin-top:.5vw;margin-bottom:.5vw}.content[_ngcontent-%COMP%]{padding-top:50px}.material-icons[_ngcontent-%COMP%]{margin-left:1vw;margin-top:.4vw;font-size:2.5vw}.tooltip[_ngcontent-%COMP%]{position:absolute;background-color:#fff;color:#000;padding:5px;border-radius:3px;z-index:9999;margin-top:3vw;font-size:1vw}.container[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#ffffff80;padding:1vw;border-radius:1vw;text-align:center;margin-top:2vw}.pregunta[_ngcontent-%COMP%]{margin-bottom:2vw;text-align:center}.opciones[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1vw}.opciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1.5vw 1vw;font-size:1.5vw;margin-bottom:.5vw}.bandera[_ngcontent-%COMP%]{width:15vw;height:10vw;object-fit:contain}p[_ngcontent-%COMP%]{margin:0}.puntos[_ngcontent-%COMP%]{color:#fff;background-color:#0000ff80;border-radius:2vw;padding:.5vw 1vw;font-size:1vw;text-align:left}.estadoDelJuego[_ngcontent-%COMP%]{width:100vw}.vidas[_ngcontent-%COMP%]{color:#fff;background-color:#ff000080;border-radius:2vw;padding:.5vw 1vw;font-size:1vw;text-align:left}.rejugar[_ngcontent-%COMP%]{display:block;padding:1vw 2vw;font-size:2vw;border:none;border-radius:5vw;cursor:pointer;text-align:center;line-height:0;margin-top:1vw}"]})};var W=[{path:"",component:b}],h=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=v({type:o});static \u0275inj=g({imports:[P.forChild(W),P]})};var U=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=v({type:o});static \u0275inj=g({providers:[d],imports:[R,h,D,L]})};export{U as PreguntadosModule};
