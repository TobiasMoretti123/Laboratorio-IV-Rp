import{a as z,l as N,m as H,n as J}from"./chunk-RFWKMY3H.js";import"./chunk-WXI33M2S.js";import"./chunk-U7MGYEHI.js";import{a as R,b as F,g as A,h as D,i as P}from"./chunk-JZGRMYVI.js";import{Ac as j,Gb as a,Gc as T,Hb as _,Ib as C,La as O,Oa as c,Pa as d,ba as x,ca as g,cb as f,ga as S,gb as l,la as M,lb as i,ma as v,mb as r,nb as I,rb as B,ta as k,ua as y,ub as m,wb as u,zc as E}from"./chunk-YTVPJGYC.js";var p=class o{constructor(t){this.http=t}apiUrl="https://restcountries.com/v3.1/all";ObtenerPaises(){return this.http.get(this.apiUrl)}ObtenerPaisesPorNombre(t){let e=`https://restcountries.com/v3.1/name/${t}`;return this.http.get(e)}static \u0275fac=function(e){return new(e||o)(S(R))};static \u0275prov=x({token:o,factory:o.\u0275fac,providedIn:"root"})};function $(o,t){if(o&1&&(i(0,"div",15),a(1),r()),o&2){let e=u();c(),_(e.usuarioLogeado)}}function q(o,t){if(o&1&&(i(0,"div"),I(1,"img",19),r()),o&2){let e=u(2);c(),l("src",e.paisCorrecto.flags.png,O)}}function Q(o,t){if(o&1&&(i(0,"div",16)(1,"h2",17),a(2,"\xBFDe qu\xE9 pa\xEDs es esta bandera?"),r(),f(3,q,2,1,"div",18),r()),o&2){let e=u();c(3),l("ngIf",e.mostrarBandera)}}function G(o,t){if(o&1){let e=B();i(0,"button",20),m("click",function(){let s=k(e).$implicit,L=u();return y(L.verificarRespuesta(s))}),i(1,"p"),a(2),r()()}if(o&2){let e=t.$implicit,n=u();l("disabled",n.desabilitarBotones),c(2),_(e.translations.spa.common)}}var b=class o{constructor(t,e,n,s){this.paisesService=t;this.fireAuthService=e;this.snackBar=n;this.router=s}paisCorrecto;opciones=[];mensajeResultado="";usuarioLogeado="";mostrarTooltip=!1;intentos=10;puntos=0;blockearRejugar=!0;desabilitarBotones=!1;mostrarBandera=!0;ngOnInit(){this.obtenerPaises(),this.fireAuthService.getUserEmail().subscribe(t=>{this.usuarioLogeado=t})}obtenerPaises(){this.paisesService.ObtenerPaises().subscribe(t=>{this.generarPregunta(t),this.EstadoDelJuego()})}generarPregunta(t){let e=Math.floor(Math.random()*t.length);this.paisCorrecto=t[e];let n=this.obtenerPaisesFalsos(t,e);this.opciones=this.mezclarOpciones([this.paisCorrecto,...n])}obtenerPaisesFalsos(t,e){let n=[];for(;n.length<3;){let s=Math.floor(Math.random()*t.length);s!==e&&!n.includes(t[s])&&n.push(t[s])}return n}mezclarOpciones(t){return t.sort(()=>Math.random()-.5)}verificarRespuesta(t){t.translations.spa.common===this.paisCorrecto.translations.spa.common?(this.puntos++,this.intentos--,this.AbrirSnackBar("\xA1Correcto!"),this.obtenerPaises()):(this.intentos--,this.AbrirSnackBar("Incorrecto, la Bandera Seleccionada era de: "+this.paisCorrecto.translations.spa.common),this.obtenerPaises())}Volver(){this.RuteoHome()}RuteoHome(){this.router.navigate(["/Home"])}AbrirSnackBar(t){this.snackBar.open(t,"Cerrar",{duration:4e3})}mostrarTexto(){this.mostrarTooltip=!0}ocultarTexto(){this.mostrarTooltip=!1}CerrarSession(){this.fireAuthService.logout(),this.RuteoHome(),this.AbrirSnackBar("Se ha cerrado la sesi\xF3n")}EstadoDelJuego(){this.intentos===0&&(this.mostrarBandera=!1,this.blockearRejugar=!1,this.desabilitarBotones=!0,this.AbrirSnackBar(`Obtuviste ${this.puntos} puntos`))}JugarDeNuevo(){this.intentos=10,this.puntos=0,this.desabilitarBotones=!1,this.blockearRejugar=!0,this.mostrarBandera=!0,this.obtenerPaises()}static \u0275fac=function(e){return new(e||o)(d(p),d(z),d(J),d(A))};static \u0275cmp=M({type:o,selectors:[["app-preguntados"]],decls:23,vars:6,consts:[[1,"button-grid"],["mat-raised-button","",3,"click"],["mat-raised-button","","routerLink","/Chat"],["mat-raised-button","","routerLink","/QuienSoy"],["mat-raised-button","","color","warn",3,"click"],[1,"material-icons",3,"mouseover","mouseleave"],["class","tooltip",4,"ngIf"],[1,"container"],["class","pregunta",4,"ngIf"],[1,"opciones"],["mat-raised-button","",3,"disabled","click",4,"ngFor","ngForOf"],[1,"estadoDeJuego"],[1,"texto","puntos"],[1,"texto","vidas"],["mat-raised-button","","color","primary",1,"rejugar",3,"click","disabled"],[1,"tooltip"],[1,"pregunta"],[1,"titulo"],[4,"ngIf"],["alt","Bandera correcta",1,"bandera",3,"src"],["mat-raised-button","",3,"click","disabled"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"button",1),m("click",function(){return n.Volver()}),a(2,"Volver"),r(),i(3,"button",2),a(4,"Chat"),r(),i(5,"button",3),a(6,"Sobre M\xED"),r(),i(7,"button",4),m("click",function(){return n.CerrarSession()}),a(8,"Cerrar Sesi\xF3n"),r(),i(9,"i",5),m("mouseover",function(){return n.mostrarTexto()})("mouseleave",function(){return n.ocultarTexto()}),a(10,"account_circle"),r(),f(11,$,2,1,"div",6),r(),i(12,"div",7),f(13,Q,4,1,"div",8),i(14,"div",9),f(15,G,3,2,"button",10),r(),i(16,"div",11)(17,"p",12),a(18),r(),i(19,"p",13),a(20),r()(),i(21,"button",14),m("click",function(){return n.JugarDeNuevo()}),a(22," Volver a Jugar "),r()()),e&2&&(c(11),l("ngIf",n.mostrarTooltip),c(2),l("ngIf",n.paisCorrecto),c(2),l("ngForOf",n.opciones),c(3),C("Puntos: ",n.puntos,""),c(2),C("Intentos: ",n.intentos,""),c(),l("disabled",n.blockearRejugar))},dependencies:[E,j,D,N],styles:[".button-grid[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;background-color:#ffffff80;padding:.1vw;display:flex;justify-content:flex-end}.button-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.5vw;padding:1vw 2vw;font-size:1vw;margin-top:.5vw;margin-bottom:.5vw}.content[_ngcontent-%COMP%]{padding-top:50px}.material-icons[_ngcontent-%COMP%]{margin-left:1vw;margin-top:.4vw;font-size:2.5vw}.tooltip[_ngcontent-%COMP%]{position:absolute;background-color:#fff;color:#000;padding:5px;border-radius:3px;z-index:9999;margin-top:3vw;font-size:1vw}.container[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#ffffff80;padding:1vw;border-radius:1vw;text-align:center;margin-top:2vw}.pregunta[_ngcontent-%COMP%]{margin-bottom:2vw;text-align:center}.opciones[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1vw}.opciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1.5vw 1vw;font-size:1.5vw;margin-bottom:.5vw}.bandera[_ngcontent-%COMP%]{width:15vw;height:10vw;object-fit:contain}p[_ngcontent-%COMP%]{margin:0}.puntos[_ngcontent-%COMP%]{color:#fff;background-color:#0000ff80;border-radius:2vw;padding:.5vw 1vw;font-size:1vw;text-align:left}.estadoDelJuego[_ngcontent-%COMP%]{width:100vw}.vidas[_ngcontent-%COMP%]{color:#fff;background-color:#ff000080;border-radius:2vw;padding:.5vw 1vw;font-size:1vw;text-align:left}.rejugar[_ngcontent-%COMP%]{display:block;padding:1vw 2vw;font-size:2vw;border:none;border-radius:5vw;cursor:pointer;text-align:center;line-height:0;margin-top:1vw}"]})};var K=[{path:"",component:b}],h=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=v({type:o});static \u0275inj=g({imports:[P.forChild(K),P]})};var V=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=v({type:o});static \u0275inj=g({providers:[p],imports:[T,h,F,H]})};export{V as PreguntadosModule};
