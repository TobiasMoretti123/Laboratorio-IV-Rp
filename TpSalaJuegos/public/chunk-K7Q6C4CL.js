import{b as Q,f as $,k as q,q as G}from"./chunk-V3MZFAJ6.js";import{a as K}from"./chunk-6KNQYTPJ.js";import{a as J}from"./chunk-OTAXIUU4.js";import{o as H,p as V,r as W}from"./chunk-UTMHNS76.js";import"./chunk-WXI33M2S.js";import{C as L}from"./chunk-QAB7D26V.js";import{g as N,h as z,i as w}from"./chunk-JZGRMYVI.js";import{Ac as T,Ec as R,Fb as E,Fc as U,Gb as a,Gc as A,Hb as g,Ib as y,Jb as O,Kb as k,Lb as I,Mb as P,Oa as s,Pa as u,Qb as _,Rb as B,Sb as M,Tb as F,ca as d,cb as f,gb as v,la as x,lb as r,ma as p,mb as o,ob as S,pb as j,ub as l,wb as m,zc as D}from"./chunk-YTVPJGYC.js";function Z(e,n){if(e&1&&(r(0,"div",13),a(1),o()),e&2){let t=m();s(),g(t.usuarioLogeado)}}function ee(e,n){if(e&1&&(S(0),r(1,"div",15)(2,"div",16),a(3),_(4,"date"),o(),r(5,"div",17),a(6),o()(),j()),e&2){let t=m().$implicit,i=m();s(3),y("Tu ",M(4,2,i.ConvertirFecha(t.fecha),"short"),""),s(3),g(t.mensaje)}}function te(e,n){if(e&1&&(r(0,"div",18)(1,"div",16),a(2),_(3,"date"),o(),r(4,"div",19),a(5),o()()),e&2){let t=m().$implicit,i=m();s(2),O("",t.usuario," ",M(3,3,i.ConvertirFecha(t.fecha),"short"),""),s(3),g(t.mensaje)}}function ne(e,n){if(e&1&&(r(0,"div"),f(1,ee,7,5,"ng-container",14)(2,te,6,6,"ng-template",null,0,F),o()),e&2){let t=n.$implicit,i=E(3),c=m();s(),v("ngIf",t.usuario===c.usuarioLogeado)("ngIfElse",i)}}var C=class e{constructor(n,t,i,c){this.fireDataBaseService=n;this.fireAuthService=t;this.router=i;this.snackBar=c}mostrarUsuario=!1;mensajes=[];nuevoMensaje="";usuarioLogeado="";ngOnInit(){this.fireDataBaseService.IniciarChat(),this.fireDataBaseService.objetos?.subscribe(n=>{this.mensajes=n}),this.fireAuthService.getUserEmail().subscribe(n=>{this.usuarioLogeado=n})}CerrarSession(){this.fireAuthService.logout(),this.AbrirSnackBar("Se a cerrado la sesion"),this.RuteoHome()}AbrirSnackBar(n){this.snackBar.open(n,"Cerrar",{duration:2e3})}EnviarMensaje(){this.nuevoMensaje.trim()!==""&&(this.fireDataBaseService.EnviarMensaje(this.usuarioLogeado,this.nuevoMensaje),this.nuevoMensaje="")}Volver(){this.RuteoHome()}RuteoHome(){this.router.navigate(["/Home"])}ConvertirFecha(n){return n instanceof J?n.toDate():n}MostrarUsuario(){this.mostrarUsuario=!0}OcultarUsuario(){this.mostrarUsuario=!1}SobreMi(){this.router.navigate(["/QuienSoy"])}static \u0275fac=function(t){return new(t||e)(u(K),u(L),u(N),u(W))};static \u0275cmp=x({type:e,selectors:[["app-chat"]],decls:21,vars:5,consts:[["otherUser",""],[1,"button-grid"],["mat-raised-button","",3,"click"],["mat-raised-button","","routerLink","/Encuesta"],["mat-raised-button","","color","warn",3,"click"],[1,"material-icons",3,"mouseover","mouseleave"],["class","tooltip",4,"ngIf"],[1,"contenedor"],[1,"chat-box"],[1,"messages"],[4,"ngFor","ngForOf"],[1,"input-area"],["matInput","","type","text","placeholder","Escribe un mensaje...",3,"ngModelChange","ngModel"],[1,"tooltip"],[4,"ngIf","ngIfElse"],[1,"sent-message"],[1,"metadata"],[1,"message-sent"],[1,"received-message"],[1,"message-received"]],template:function(t,i){t&1&&(r(0,"div",1)(1,"button",2),l("click",function(){return i.Volver()}),a(2,"Volver"),o(),r(3,"button",3),a(4,"Encuesta"),o(),r(5,"button",2),l("click",function(){return i.SobreMi()}),a(6,"Sobre M\xED"),o(),r(7,"button",4),l("click",function(){return i.CerrarSession()}),a(8,"Cerrar Sesi\xF3n"),o(),r(9,"i",5),l("mouseover",function(){return i.MostrarUsuario()})("mouseleave",function(){return i.OcultarUsuario()}),a(10,"account_circle"),o(),f(11,Z,2,1,"div",6),o(),r(12,"div",7)(13,"div",8)(14,"div",9),f(15,ne,4,2,"div",10),_(16,"async"),o()(),r(17,"div",11)(18,"input",12),P("ngModelChange",function(b){return I(i.nuevoMensaje,b)||(i.nuevoMensaje=b),b}),o(),r(19,"button",4),l("click",function(){return i.EnviarMensaje()}),a(20,"Enviar"),o()()()),t&2&&(s(11),v("ngIf",i.mostrarUsuario),s(4),v("ngForOf",B(16,3,i.fireDataBaseService.objetos)),s(3),k("ngModel",i.nuevoMensaje))},dependencies:[D,T,z,H,Q,$,q,R,U],styles:[".button-grid[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;background-color:#ffffff80;padding:.1vw;display:flex;justify-content:flex-end}.button-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.5vw;padding:1vw 2vw;font-size:1vw;margin-top:.5vw;margin-bottom:.5vw}.content[_ngcontent-%COMP%]{padding-top:50px}.material-icons[_ngcontent-%COMP%]{margin-left:1vw;margin-top:.4vw;font-size:2.5vw}.tooltip[_ngcontent-%COMP%]{position:absolute;background-color:#fff;color:#000;padding:5px;border-radius:3px;z-index:9999;margin-top:3vw;font-size:1vw}.contenedor[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#d2691e;padding:1vw;border-radius:1vw;text-align:center;margin-top:2vw}.chat-box[_ngcontent-%COMP%]{width:40vw;height:35vw;border:.5vw solid #000000;background-color:#fff;border-radius:2vw;overflow-y:auto}.metadata[_ngcontent-%COMP%]{color:#000;margin-top:1vw;font-size:1vw}.sent-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;margin-bottom:1vw;font-size:1vw;margin-right:1vw}.received-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;margin-bottom:1vw;font-size:1vw;margin-left:1vw}.message-sent[_ngcontent-%COMP%]{background-color:#dcf8c6;padding:.5vw 1vw;border-radius:1vw}.message-received[_ngcontent-%COMP%]{background-color:#eaeaea;padding:.5vw 1vw;border-radius:1vw}.input-area[_ngcontent-%COMP%]{padding:1vw 2vw;display:flex;align-items:center}.input-area[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:1vw 2vw;font-size:1vw}.input-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1.5vw;margin-left:1vw;font-size:1vw}"]})};var ie=[{path:"",component:C}],h=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=p({type:e});static \u0275inj=d({imports:[w.forChild(ie),w]})};var Y=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=p({type:e});static \u0275inj=d({imports:[A,h,V,G]})};export{Y as ChatModule};
